<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<!--
  macOS Entitlements for Developer ID (non-App Store) distribution.
  
  APP STORE MIGRATION: To re-enable sandboxing for Mac App Store, uncomment:
  - com.apple.security.app-sandbox
  - com.apple.security.files.user-selected.read-write
  - com.apple.security.network.client
  - com.apple.security.temporary-exception.apple-events
  - keychain-access-groups
  - com.apple.developer.associated-domains
  - com.apple.developer.ubiquity-kvstore-identifier
  
  Note: com.apple.security.device.audio-input is ALWAYS required (hardened runtime + sandbox).
  
  Note: Sandboxed apps require users to manually add them to Accessibility
  in System Settings. Non-sandboxed apps appear automatically when calling
  AXIsProcessTrustedWithOptions with kAXTrustedCheckOptionPrompt.
-->
<plist version="1.0">
<dict>
	<!-- ============================================================
	     APP STORE ONLY - Uncomment these for Mac App Store builds
	     ============================================================ -->
	
	<!-- Sandbox (REQUIRED for App Store)
	<key>com.apple.security.app-sandbox</key>
	<true/>
	-->
	
	<!-- Sandbox capabilities - only these additional ones needed when sandboxed
	<key>com.apple.security.files.user-selected.read-write</key>
	<true/>
	<key>com.apple.security.network.client</key>
	<true/>
	<key>com.apple.security.temporary-exception.apple-events</key>
	<array>
		<string>com.apple.systemevents</string>
	</array>
	-->
	
	<!-- iCloud Key-Value Storage - requires managed profile
	<key>com.apple.developer.ubiquity-kvstore-identifier</key>
	<string>$(TeamIdentifierPrefix)com.justspeaktoit</string>
	-->
	
	<!-- Associated Domains - requires managed profile
	<key>com.apple.developer.associated-domains</key>
	<array>
		<string>applinks:justspeaktoit.com</string>
		<string>webcredentials:justspeaktoit.com</string>
	</array>
	-->
	
	<!-- Keychain sharing - requires managed profile
	<key>keychain-access-groups</key>
	<array>
		<string>$(AppIdentifierPrefix)com.justspeaktoit.shared</string>
	</array>
	-->
	
	<!-- ============================================================
	     ACTIVE ENTITLEMENTS - Used for Developer ID distribution
	     ============================================================ -->
	
	<!-- Microphone access - REQUIRED for hardened runtime to prompt for permission -->
	<key>com.apple.security.device.audio-input</key>
	<true/>
	
	<!-- AppleScript/Automation - send events to other apps -->
	<key>com.apple.security.automation.apple-events</key>
	<true/>
	
	<!-- Hardened Runtime: Allow loading unsigned dylibs (for plugins) -->
	<key>com.apple.security.cs.disable-library-validation</key>
	<true/>

	<!-- Restricted for Developer ID (iCloud/APNs): requires embedded provisioning profile.
	     For App Store builds, uncomment and set aps-environment to production.
	<key>com.apple.developer.icloud-container-identifiers</key>
	<array>
		<string>iCloud.com.justspeaktoit</string>
	</array>
	<key>com.apple.developer.icloud-services</key>
	<array>
		<string>CloudKit</string>
	</array>
	<key>aps-environment</key>
	<string>development</string>
	-->
</dict>
</plist>
